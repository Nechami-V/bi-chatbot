# Shared Functions and Aggregations
# Define available functions, aggregations, and operations

aggregations:
  count:
    sql_function: "COUNT"
    hebrew_names: ["ספירה", "כמה", "מספר", "כמות"]
    return_type: "integer"
    description: "Count number of records"
    
  sum:
    sql_function: "SUM"
    hebrew_names: ["סכום", "סה\"כ", "סיכום", "חיבור"]
    return_type: "decimal"
    description: "Sum numeric values"
    applicable_types: ["integer", "decimal"]
    
  average:
    sql_function: "AVG"
    hebrew_names: ["ממוצע", "אברג'", "ממוצע חשבוני"]
    return_type: "decimal"
    description: "Calculate average"
    applicable_types: ["integer", "decimal"]
    
  max:
    sql_function: "MAX"
    hebrew_names: ["מקסימום", "הכי גדול", "הכי הרבה", "הגבוה ביותר"]
    return_type: "dynamic"
    description: "Find maximum value"
    
  min:
    sql_function: "MIN"
    hebrew_names: ["מינימום", "הכי קטן", "הכי מעט", "הנמוך ביותר"]
    return_type: "dynamic"
    description: "Find minimum value"

# Query patterns and intent recognition
query_patterns:
  count_entities:
    pattern: "כמה {entity}"
    intent: "count"
    sql_template: "SELECT COUNT(*) FROM {table}"
    
  show_entities:
    pattern: "הצג {entity}"
    intent: "select"
    sql_template: "SELECT * FROM {table}"
    
  sum_by_attribute:
    pattern: "סכום {attribute}"
    intent: "aggregate"
    aggregation: "sum"
    
  filter_by_city:
    pattern: "{entity} ב{city}"
    intent: "filter"
    filter_type: "equals"

# Date and time functions  
date_functions:
  current_year:
    sql_function: "strftime('%Y', 'now')"
    hebrew_names: ["שנה נוכחית", "השנה", "השנה הנוכחית"]
    
  current_month:
    sql_function: "strftime('%m', 'now')" 
    hebrew_names: ["חודש נוכחי", "החודש", "החודש הנוכחי"]