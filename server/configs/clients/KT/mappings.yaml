# Client-specific Hebrew to SQL mappings for KT
# Extends and overrides shared mappings

client_id: "KT"

# Hebrew terms specific to this client
custom_terms:
  entities:
    client:
      hebrew_names: ["לקוח", "לקוחה", "קליינט", "צרכן", "רוכש", "משפחה"]
      additional_names: ["משפחות", "רשימת לקוחות", "בעלי בית"]
    
    item:
      hebrew_names: ["פריט", "מוצר", "פרטים", "מוצרים", "מאכל"]
      additional_names: ["מנה", "מנות", "מזון"]
    
    class:
      hebrew_names: ["קטגוריה", "סוג", "קבוצה", "משפחת מוצרים"]
      additional_names: ["סוגים", "קטגוריות"]
    
    order:
      hebrew_names: ["הזמנה", "הזמנות", "רכישה", "עסקה"]
      additional_names: ["טרנזקציה", "פעולה"]
    
    list:
      hebrew_names: ["רשימה", "רשימות", "תלוש"]
      additional_names: ["כרטיס", "כרטיסים"]
    
    item_sale:
      hebrew_names: ["מכירת פריט", "פריט במכירה"]
      additional_names: ["פריט שנמכר"]
    
    site:
      hebrew_names: ["אתר", "סניף", "מיקום", "תחנה"]
      additional_names: ["סניפים", "אתרים", "תחנות"]
      
  attributes:
    # שדות לקוח
    first_name:
      hebrew_names: ["שם פרטי", "שם", "שם ראשון"]
    
    last_name:
      hebrew_names: ["שם משפחה", "משפחה", "שם אחרון"]
    
    spouse_name:
      hebrew_names: ["שם בת זוג", "שם אישה", "שם בעל", "שם הזוג"]
    
    city:
      hebrew_names: ["עיר", "ישוב", "מקום מגורים", "מגורים"]
    
    street:
      hebrew_names: ["רחוב", "כתובת"]
    
    house_number:
      hebrew_names: ["מספר בית", "בית", "מס בית"]
    
    # שדות פריט
    name:
      hebrew_names: ["שם", "כותרת", "תיאור"]
    
    price:
      hebrew_names: ["מחיר", "עלות", "סכום", "ערך"]
    
    units:
      hebrew_names: ["יחידות", "כמות", "מספר"]
    
    # שדות הזמנה
    amount:
      hebrew_names: ["כמות", "סכום כמות", "מספר"]
    
    time:
      hebrew_names: ["זמן", "תאריך", "מועד", "שעה"]
      additional_names: ["תאריך ושעה", "מתי"]
    
    # שדות מיוחדים
    zikuy:
      hebrew_names: ["זיכוי", "זיכויים", "החזר"]
    
    workers:
      hebrew_names: ["עובדים", "עובד", "צוות"]
    
    group:
      hebrew_names: ["קבוצה", "קבוצת", "סיווג"]

# Business rules specific to this client
business_rules:
  default_filters:
    # Show only active clients by default
    client:
      lock: "lock = 0 OR lock IS NULL"
    
    # Show only active items
    item:
      time: "time IS NOT NULL"
    
    # Default to current year for orders
    order:
      time: "YEAR(time) = YEAR(GETDATE())"
      
  default_ordering:
    client: "lname ASC, fname ASC"
    item: "name ASC"
    order: "time DESC"
    list: "time DESC"
    
  aggregations:
    # Common aggregations
    total_amount: "SUM(amount)"
    total_price: "SUM(price)"
    avg_price: "AVG(price)"
    count_orders: "COUNT(DISTINCT id)"
    count_clients: "COUNT(DISTINCT clientid)"

# Client-specific query shortcuts
shortcuts:
  "מכירות החודש":
    description: "סך מכירות החודש הנוכחי"
    sql: "SELECT SUM(amount_price) as total FROM Orders WHERE YEAR(time) = YEAR(GETDATE()) AND MONTH(time) = MONTH(GETDATE())"
    
  "לקוחות פעילים":
    description: "מספר לקוחות פעילים"
    sql: "SELECT COUNT(*) as total FROM clients WHERE (lock = 0 OR lock IS NULL)"
    
  "הזמנות היום":
    description: "מספר הזמנות היום"
    sql: "SELECT COUNT(*) as total FROM Orders WHERE CAST(time AS DATE) = CAST(GETDATE() AS DATE)"
    
  "פריטים פופולריים":
    description: "10 הפריטים הנמכרים ביותר החודש"
    sql: |
      SELECT TOP 10 i.name, SUM(o.amount) as total_amount
      FROM Orders o
      JOIN items_sales [is] ON o.item_salesID = [is].id
      JOIN items i ON [is].itemid = i.id
      WHERE YEAR(o.time) = YEAR(GETDATE()) AND MONTH(o.time) = MONTH(GETDATE())
      GROUP BY i.name
      ORDER BY total_amount DESC
      
  "זיכויים היום":
    description: "סך זיכויים היום"
    sql: "SELECT SUM(F_amount_zikuy_price) as total FROM Orders WHERE CAST(time AS DATE) = CAST(GETDATE() AS DATE) AND F_amount_zikuy > 0"

# Translation mappings for common phrases
common_phrases:
  "כמה": "COUNT"
  "סכום": "SUM"
  "ממוצע": "AVG"
  "מקסימום": "MAX"
  "מינימום": "MIN"
  "היום": "CAST(GETDATE() AS DATE)"
  "השבוע": "DATEPART(week, GETDATE())"
  "החודש": "MONTH(GETDATE())"
  "השנה": "YEAR(GETDATE())"
  "אתמול": "CAST(DATEADD(day, -1, GETDATE()) AS DATE)"
  "השבוע שעבר": "DATEPART(week, DATEADD(week, -1, GETDATE()))"
  "החודש שעבר": "MONTH(DATEADD(month, -1, GETDATE()))"
  "השנה שעברה": "YEAR(DATEADD(year, -1, GETDATE()))"

# Field value mappings
value_mappings:
  # Transaction types
  trans_type_id:
    "1": "רגיל"
    "2": "זיכוי"
    "3": "החזר"
  
  # Lock status
  lock:
    "0": "פעיל"
    "1": "נעול"
  
  # Disable status
  disable:
    "0": "מאופשר"
    "1": "מבוטל"
